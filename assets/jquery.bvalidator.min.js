!function(e){e.fn.bValidator=function(a,t){return this.each(function(){new bValidator(e(this),a,t)})},bValidator=function(a,t,n){var r,i={singleError:!1,offset:{x:-23,y:-4},position:{x:"right",y:"top"},template:'<div class="{errMsgClass}"><em/>{message}</div>',templateCloseIcon:'<div style="display:table"><div style="display:table-cell">{message}</div><div style="display:table-cell"><div class="{closeIconClass}">x</div></div></div>',showCloseIcon:!0,showErrMsgSpeed:"normal",scrollToError:!0,classNamePrefix:"bvalidator_",closeIconClass:"close_icon",errMsgClass:"errmsg",errorClass:"invalid",validClass:"",lang:"en",errorMessageAttr:"data-bvalidator-msg",validateActionsAttr:"data-bvalidator",forceValidAttr:"data-bvalidator-forcevalid",modifyActionsAttr:"data-bvalidator-modifier",paramsDelimiter:":",actionsDelimiter:",",validateOn:null,errorValidateOn:"keyup",onBeforeValidate:null,onAfterValidate:null,onValidateFail:null,onValidateSuccess:null,onBeforeElementValidation:null,onAfterElementValidation:null,onBeforeAllValidations:null,onAfterAllValidations:null,validateOnSubmit:!0,stopSubmitPropagation:!0,noMsgIfExistsForInstance:[],validateTillInvalid:!1,autoModifiers:{digit:["trim"],number:["trim"],email:["trim"],url:["trim"],date:["trim"],ip4:["trim"],ip6:["trim"]},ajaxAnswerValid:"ok",ajaxDelay:300,ajaxOptions:{cache:!1},ajaxParamName:"bValue",errorMessages:{en:{"default":"Please correct this value.",equalto:"Please enter the same value again.",differs:"Please enter a different value.",minlength:"The length must be at least {0} characters",maxlength:"The length must be at max {0} characters",rangelength:"The length must be between {0} and {1}",min:"Please enter a number greater than or equal to {0}.",max:"Please enter a number less than or equal to {0}.",between:"Please enter a number between {0} and {1}.",required:"This field is required.",alpha:"Please enter alphabetic characters only.",alphanum:"Please enter alphanumeric characters only.",digit:"Please enter only digits.",number:"Please enter a valid number.",email:"Please enter a valid email address.",image:"This field should only contain image types",url:"Please enter a valid URL.",ip4:"Please enter a valid IPv4 address.",ip6:"Please enter a valid IPv6 address.",date:"Please enter a valid date in format {0}."}}},s=function(a,t,n,r){var s=a.data("ajaxData.bV"+t);if(s?clearTimeout(s.timeOut):(s={},a.data("ajaxData.bV"+t,s)),s.val=a.val(),s.lastValidated===s.val)return A.ajax(s.lastResponse);var l=e.extend({},i.ajaxOptions);if("object"!=typeof l.data&&(l.data={}),l.url=n,r){var o=!1;return l.async=!1,l.data[i.ajaxParamName]=s.val,e.ajax(l).done(function(e){s.lastValidated=s.val,s.lastResponse=e,o=A.ajax(e)}),o}s.timeOut=setTimeout(function(){var t=a.val();s.val==t&&(l.async=!0,l.data[i.ajaxParamName]=t,e.ajax(l).done(function(e){s.lastValidated=t,s.lastResponse=e,F.validate(!1,a,void 0,e)}))},i.ajaxDelay)},l=function(e){return e.is(":input")?e:e.find(":input["+i.validateActionsAttr+"], :input["+i.modifyActionsAttr+"]").not(":button, :image, :reset, :submit, :hidden, :disabled")},o=function(a){a.bind(i.validateOn+".bV"+n,{bVInstance:F},function(a){a.data.bVInstance.validate(!1,e(this))})},d=function(e,a){for(var t=0;t<a.length;t++)if(e.data("errMsg.bV"+a[t]))return!0;return!1},u=function(a,t){f(a),msg_container=e('<div class="bVErrMsgContainer"></div>').css("position","absolute"),a.data("errMsg.bV"+n,msg_container),msg_container.insertAfter(a);for(var s="",l=0;l<t.length;l++)s+="<div>"+t[l]+"</div>\n";i.showCloseIcon&&(s=i.templateCloseIcon.replace("{message}",s).replace("{closeIconClass}",i.classNamePrefix+i.closeIconClass));var o=e(i.template.replace("{errMsgClass}",i.classNamePrefix+i.errMsgClass).replace("{message}",s));o.appendTo(msg_container),o.find("."+i.classNamePrefix+i.closeIconClass).click(function(a){a.preventDefault(),e(this).closest("."+i.classNamePrefix+i.errMsgClass).css("visibility","hidden")});var d=c(a,o);if(o.css({visibility:"visible",position:"absolute",top:d.top,left:d.left}).fadeIn(i.showErrMsgSpeed),i.scrollToError){var u=o.offset().top;(null===r||u<r)&&(r=u)}},f=function(e){var a=e.data("errMsg.bV"+n);a&&(a.remove(),e.data("errMsg.bV"+n,null))},c=function(e,a){var t=e.data("errMsg.bV"+n),r=-(t.offset().top-e.offset().top+a.outerHeight()-i.offset.y),s=e.offset().left+e.outerWidth()-t.offset().left+i.offset.x,l=i.position.x,o=i.position.y;if("center"==o||"bottom"==o){var d=a.outerHeight()+e.outerHeight();"center"==o&&(r+=d/2),"bottom"==o&&(r+=d)}if("center"==l||"left"==l){var u=e.outerWidth();"center"==l&&(s-=u/2),"left"==l&&(s-=u)}return{top:r,left:s}},m=function(a,t,n,r){if(e.isFunction(i[a]))return i[a](t,n,r)},v=function(a){var t=a.attr("name");return t&&/^[^\[\]]+\[.*\]$/.test(t)?e("input:checkbox").filter(function(){var e=new RegExp(t.match(/^[^\[\]]+/)[0]+"\\[.*\\]$");return this.name.match(e)}):a},h=function(a){var t={};return a.is("input:checkbox")?t.value=a.attr("name")?t.selectedInGroup=v(a).filter(":checked").length:a.attr("checked"):a.is("input:radio")?t.value=a.attr("name")?t.value=e('input:radio[name="'+a.attr("name")+'"]:checked').length:a.val():a.is("select")?(t.selectedInGroup=e("option:selected",a).length,t.value=a.val()):a.is(":input")&&(t.value=a.val()),t},g=function(a){var t=e.trim(a).replace(new RegExp("\\s*\\"+i.actionsDelimiter+"\\s*","g"),i.actionsDelimiter);return t?t.split(i.actionsDelimiter):null},p=function(a){var t=e.trim(a).match(/^(.*?)\[(.*?)\]/);return t&&3==t.length?{name:t[1],params:t[2].split(i.paramsDelimiter)}:{name:a,params:[]}},b=function(a,t){var n,r=V(a,t);"undefined"!=typeof r&&(n=e(t).val(),n!=r&&e(t).val(r))},V=function(a,t){var n=[e(t).val()].concat(a.params);return"function"==typeof y[a.name]?y[a.name].apply(t,n):"function"==typeof window[a.name]?window[a.name].apply(t,n):void window.console.warn},x=function(e,a,t){return"function"==typeof A[e.name]?A[e.name].apply(a,[t].concat(e.params)):"function"==typeof window[e.name]?window[e.name].apply(a,[t.value].concat(e.params)):void window.console.warn},A={equalto:function(a,t){return a.value==e("#"+t).val()},differs:function(a,t){return a.value!=e("#"+t).val()},minlength:function(e,a){return e.value.length>=parseInt(a)},maxlength:function(e,a){return e.value.length<=parseInt(a)},rangelength:function(e,a,t){return e.value.length>=parseInt(a)&&e.value.length<=parseInt(t)},min:function(e,a){return e.selectedInGroup?e.selectedInGroup>=parseFloat(a):!!A.number(e)&&parseFloat(e.value)>=parseFloat(a)},max:function(e,a){return e.selectedInGroup?e.selectedInGroup<=parseFloat(a):!!A.number(e)&&parseFloat(e.value)<=parseFloat(a)},between:function(e,a,t){if(e.selectedInGroup)return e.selectedInGroup>=parseFloat(a)&&e.selectedInGroup<=parseFloat(t);if(!A.number(e))return!1;var n=parseFloat(e.value);return n>=parseFloat(a)&&n<=parseFloat(t)},required:function(a){return!(!a.value||!e.trim(a.value))},alpha:function(e){return A.regex(e,/^[a-z ._\-]+$/i)},alphanum:function(e){return A.regex(e,/^[a-z\d ._\-]+$/i)},digit:function(e){return A.regex(e,/^\d+$/)},number:function(e){return A.regex(e,/^[-+]?\d+(\.\d+)?$/)},email:function(e){return A.regex(e,/^([a-zA-Z\d_\.\-\+%])+\@(([a-zA-Z\d\-])+\.)+([a-zA-Z\d]{2,4})+$/)},image:function(e){return A.regex(e,/\.(jpg|jpeg|png|gif|bmp)$/i)},url:function(e){return A.regex(e,/^\b(https?|ftp):\/\/([-A-Z0-9.]+)(\/[-A-Z0-9+&@#\/%=~_|!:,.;]*)?(\?[A-Z0-9+&@#\/%=~_|!:,.;]*)?$/i)},regex:function(e,a,t){return"string"==typeof a&&(a=new RegExp(a,t)),a.test(e.value)},ip4:function(e){return A.regex(e,/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/)},ip6:function(e){return A.regex(e,/^(?:(?:(?:[A-F\d]{1,4}:){5}[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){4}:[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){3}(?::[A-F\d]{1,4}){1,2}|(?:[A-F\d]{1,4}:){2}(?::[A-F\d]{1,4}){1,3}|[A-F\d]{1,4}:(?::[A-F\d]{1,4}){1,4}|(?:[A-F\d]{1,4}:){1,5}|:(?::[A-F\d]{1,4}){1,5}|:):(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)|(?:[A-F\d]{1,4}:){7}[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){6}:[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){5}(?::[A-F\d]{1,4}){1,2}|(?:[A-F\d]{1,4}:){4}(?::[A-F\d]{1,4}){1,3}|(?:[A-F\d]{1,4}:){3}(?::[A-F\d]{1,4}){1,4}|(?:[A-F\d]{1,4}:){2}(?::[A-F\d]{1,4}){1,5}|[A-F\d]{1,4}:(?::[A-F\d]{1,4}){1,6}|(?:[A-F\d]{1,4}:){1,7}:|:(?::[A-F\d]{1,4}){1,7})$/i)},date:function(e,a){if(10==e.value.length&&10==a.length){var t=a.match(/[^mdy]+/g);if(2==t.length&&1==t[0].length&&t[0]==t[1]){for(var n=e.value.split(t[0]),r=a.split(t[0]),i=0;i<3;i++)if("dd"==r[i])var s=n[i];else if("mm"==r[i])var l=n[i];else if("yyyy"==r[i])var o=n[i];var d=new Date(o,l-1,s);return d.getMonth()+1==l&&d.getDate()==s&&d.getFullYear()==o}}return!1},extension:function(){var e=arguments[0],a="";if(!arguments[1])return!1;for(var t=1;t<arguments.length;t++)a+=arguments[t],t!=arguments.length-1&&(a+="|");return A.regex(e,"\\.("+a+")$","i")},ajax:function(e){return e==i.ajaxAnswerValid}},y={trim:function(a){return e.trim(a)}},F=this;window.bValidatorOptions&&e.extend(!0,i,window.bValidatorOptions),t&&e.extend(!0,i,t);var w=a.data("bValidators");if(w||(w={},a.data("bValidators",w)),a.data("bValidator")){if(!n)return a.data("bValidator");if(w[n])return w[n]}else n||(n="first"),a.data("bValidator",this);w[n]=this,a.is("form")&&(i.validateOnSubmit&&a.bind("submit.bV"+n,function(e){return!!F.validate(!1,void 0,1)||(i.stopSubmitPropagation?(e.stopImmediatePropagation(),!1):void 0)}),a.bind("reset.bV"+n,function(){F.reset()})),i.validateOn&&o(l(a)),this.validate=function(t,c,V,y,w){var I=!0,M=c?c:l(a);if(r=null,"undefined"==typeof y&&m("onBeforeAllValidations",M)===!1||M.each(function(){var a,r=g(e(this).attr(i.validateActionsAttr)),l=g(e(this).attr(i.modifyActionsAttr)),c=-1,M=[],P=0;if(l)for(var C=0;C<l.length;C++)a=p(l[C]),a.name&&b(a,this);if(!r)return!0;for(var C=0;C<r.length;C++)if(a=p(r[C]),a.name){if(i.autoModifiers&&i.autoModifiers[a.name])for(var j=0;j<i.autoModifiers[a.name].length;j++)b(p(i.autoModifiers[a.name][j]),this);if("required"==a.name)var O=1;else if("ajax"==a.name)var E=1;if("valempty"==a.name)var D=1;else M[++c]=a}var k,T=h(e(this)),N=[];if(!V&&E&&"undefined"==typeof y){for(var $=0,C=0;C<M.length&&"ajax"!=M[C].name;C++)if(!x(M[C],this,T)){$=1;break}if(!$&&(y=s(e(this),n,a.params[0]),"undefined"==typeof y))return!0}if(i.noMsgIfExistsForInstance.length&&d(e(this),i.noMsgIfExistsForInstance)&&(t=1),(O||D||A.required(T))&&"true"!=e(this).attr(i.forceValidAttr)||(P=1),!P){var _=e(this).attr(i.errorMessageAttr),q=0;if(e(this).data("checked.bV"+n,1),m("onBeforeElementValidation",e(this))!==!1)for(var C=0;C<M.length;C++)if("valempty"!=M[C].name){if((i.validateTillInvalid||w)&&N.length)break;if(m("onBeforeValidate",e(this),M[C].name)!==!1){if("ajax"==M[C].name){if($)continue;k=V||"undefined"==typeof y?!!N.length||s(e(this),n,M[C].params[0],1):A.ajax.apply(this,[y])}else k=x(M[C],this,T);if(m("onAfterValidate",e(this),M[C].name,k)!==!1)if(k)m("onValidateSuccess",e(this),M[C].name);else{if(t)N[N.length]="";else if(!q){if(_)q=1;else if(i.singleError&&N.length)q=1,_="";else if(i.errorMessages[i.lang]&&i.errorMessages[i.lang][M[C].name])_=i.errorMessages[i.lang][M[C].name];else if(i.errorMessages.en[M[C].name])_=i.errorMessages.en[M[C].name];else{var G=e(this).attr(i.errorMessageAttr+"-"+M[C].name);_=G?G:i.errorMessages[i.lang]&&i.errorMessages[i.lang]["default"]?i.errorMessages[i.lang]["default"]:i.errorMessages.en["default"]}if(_.indexOf("{"))for(var R=0;R<M[C].params.length;R++)_=_.replace(new RegExp("\\{"+R+"\\}","g"),M[C].params[R]);N.length&&"required"==M[C].name||(N[N.length]=_),_=null}I=!1,m("onValidateFail",e(this),M[C].name,N)}}}var S=m("onAfterElementValidation",e(this),N)}if(!t&&S!==!1&&e(this).data("checked.bV"+n)){var B=e(this).is("input:checkbox,input:radio")?1:0;if(N.length){if(0!==S&&u(e(this),N),B||(e(this).removeClass(i.classNamePrefix+i.validClass),i.errorClass&&e(this).addClass(i.classNamePrefix+i.errorClass)),i.errorValidateOn){i.validateOn&&e(this).unbind(i.validateOn+".bV"+n);var Z=B||e(this).is("select,input:file")?"change":i.errorValidateOn;if(B){var z=e(this).is("input:checkbox")?v(e(this)):e('input:radio[name="'+e(this).attr("name")+'"]');e(z).unbind(".bVerror"+n),e(z).bind("change.bVerror"+n,{bVInstance:F,groupLeader:e(this)},function(e){e.data.bVInstance.validate(!1,e.data.groupLeader)})}else e(this).unbind(".bVerror"+n),e(this).bind(Z+".bVerror"+n,{bVInstance:F},function(a){a.data.bVInstance.validate(!1,e(this))})}}else 0!==S&&f(e(this)),B||(e(this).removeClass(i.classNamePrefix+i.errorClass),i.validClass&&e(this).addClass(i.classNamePrefix+i.validClass)),i.validateOn&&(e(this).unbind(i.validateOn+".bV"+n),o(e(this))),e(this).data("checked.bV"+n,0)}return(!i.singleError&&!w||I!==!1)&&void 0}),m("onAfterAllValidations",M,I),r&&!c&&(e(window).scrollTop()>r||e(window).scrollTop()+e(window).height()<r)){var P=navigator.userAgent.toLowerCase();e(P.indexOf("chrome")>-1||P.indexOf("safari")>-1?"body":"html").animate({scrollTop:r-10},{duration:"slow"})}return I},this.getOptions=function(){return i},this.getValidators=this.getActions=function(){return A},this.getModifiers=function(){return y},this.isValid=function(e){return this.validate(!0,e,1,void 0,!0)},this.removeMsg=this.removeErrMsg=function(e){f(e)},this.showMsg=function(e,a){e.length&&("string"==typeof a&&(a=[a]),u(e,a))},this.getInputs=function(){return l(a)},this.bindValidateOn=function(e){o(e)},this.reset=function(){elements=l(a),i.validateOn&&o(elements),elements.each(function(){f(e(this)),e(this).unbind(".bVerror"+n),e(this).removeClass(i.classNamePrefix+i.errorClass),e(this).removeClass(i.classNamePrefix+i.validClass),e(this).removeData("ajaxData.bV"+n),e(this).removeData("errMsg.bV"+n),e(this).removeData("checked.bV"+n)})},this.destroy=function(){a.is("form")&&a.unbind(".bV"+n),this.reset(),a.removeData("bValidator"),a.removeData("bValidators")}}}(jQuery);